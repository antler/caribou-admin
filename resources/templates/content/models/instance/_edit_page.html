<table class="table table-striped table-bordered edit-page">
  <thead>
    <tr>
      <th>Field</th>
      <th>Type</th>
      {{#bulk?}}<th>Update?</th>{{/bulk?}}
      {{#model.localized}}
        {{^global?}}
          <th>global</th>
        {{/global?}}
      {{/model.localized}}
      <th>Value</th>
    </tr>
  </thead>
  <tbody class="" data-position='{ "model":"field", "offset": 0, "field":"model-position" }'>

  {{!TODO: fix this hidden-field nonsense}}

  {{#bulk?}}<input type="hidden" name="ids" value="{{ids}}" />{{/bulk?}}

  {{#model.fields:field}}
    {{! Only showing editable fields for now}}
    {{#or field.editable params.show-hidden}}
      {{^join-model? field}}
      <tr data-position='{ "position": {{model-position}}, "id": "{{id}}" }' {{#locked}}class="disabled_bg"{{/locked}}>
        <td>
          {{#field.description}}
            <span title="{{description}}">{{name}}</span>
          {{/field.description}}
          {{^field.description}}
            {{name}}
          {{/field.description}}
        </td>
        <td>{{type}}</td>
        {{#bulk?}}<td><input type="checkbox" value="{{field.slug}}" name="caribou-update" /></td>{{/bulk?}}
        {{#model.localized}}
          {{^global?}}
            <td><input type="checkbox" value="{{field.slug}}" name="caribou-use-global" 
              {{^get-in instance field.slug}}checked="checked"{{/get-in instance field.slug}} /></td>
          {{/global?}}
        {{/model.localized}}
        <td>
          {{> templates/content/models/fields/edit/_[[type]].html }}
        </td>
      </tr>
      {{/join-model? field}}
    {{/or field.editable params.show-hidden}}
  {{/model.fields:field}}
  </tbody>
</table>

<div class="siphons" style="margin-bottom: 40px;">
  <h2>Siphons (Page Properties)</h2>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Employees</td>
        <td>collection</td>
        <td>No item(s) <a id="edit-page-siphons" data-slug="siphons" href="#" class="pull-right btn btn-primary hide" style="display: inline;">Edit</a></td>
      </tr>
      <!-- NEW -->
      <tr>
        <td><input type="text" autocomplete="off" name="siphon-name" id="siphon-name"></td>
        <td><select name="siphon-types">
           <option value="0">string</option>
           <option value="1">integer</option>
           <option value="2">collection</option>
           <option value="3">part</option>
        </select></td>
        <td>No item(s) <a id="edit-page-siphons" data-slug="siphons" href="#" class="pull-right btn btn-primary hide" style="display: inline;">Edit</a></td>
      </tr>
    </tbody>
  </table>
  <button class="btn btn-primary add-siphon"><span class="instrument-icon-circle-plus"></span> Add new</button>
</div>

{{#localized?}}
<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>This content can be localized.</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        {{#instance.id}}
          <select name="locale">
            <option value="">Global</option>
            {{#locales:item}}
            <option value="{{item.code}}" {{#equals item.code locale.code}}selected{{/equals item.code locale.code}}>{{item.code}}{{#item.language}} ({{item.language}}){{/item.language}} {{#item.region}} ({{item.region}}){{/item.region}}</option>
            {{/locales:item}}
          </select> 
        {{/instance.id}}
      </td>
    </tr>
  </tbody>
</table>
{{/localized?}}
